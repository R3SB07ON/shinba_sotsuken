<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../../CSS/p/desktop.css">
    <script src = "../../JavaScript/c/parameter.js"></script>
    <script src = "../../JavaScript/c/paramchange.js"></script>
    <script src = "../../JavaScript/c/task.js"></script>
    <script src = "../../JavaScript/p/other.js"></script>
    <title>デスクトップ画面</title>
</head>
<body >
    <div class="ttt">

        <div>    <!-- //計５つのアイコンを上下に段分けするためのdiv -->
            <input type="image" class="icon" src="../../material/image/p/mail.png" alt="メール" onclick="location.href = './mlist.html'" >
        </div>
        <div>
            <input type="image" class="icon" src="../../material/image/p/chat.png" alt="チャット" onclick="location.href = './chat.html'">
        </div>

        <div>
            <input type="image" class="icon" src="../../material/image/p/file.png" alt="ファイル一覧" onclick="location.href = './filelist.html'">
        </div>
        <div>
            <input type="image" class="icon" src="../../material/image/p/meeting.png" alt="web会議" onclick="location.href = './meeting.html'">
        </div>
        <div>
            <input type="image" class="icon" src="../../material/image/p/browser_mark.png" alt="ブラウザ" onclick="location.href = './browser.html'">
        </div>
        <div id="iconarea" class="iconarea">

                <button class="btn">スリープ</button>
                <button class="btnup" id="main" onclick="update_check();">アップデート</button>
                <button class="btn" onclick="btnpush()">再起動</button>
                <button class="btn" onclick="btnpush()">シャットダウン</button>

        </div>




        <div class="window">
            <input type="image" class="open" src="../../material/image/p/window_mark.png" alt="ウィンドウズマーク" onclick="popup();">    <!-- //ボタンクリックで上記関数を呼び出し -->
        </div>

    </div>
    <script>
    let flag = 0
    if(localStorage.getItem("f_update") == "true"){
        document.getElementById('main').style.backgroundColor = "#808080";
    }

    function popup(){
        if(flag==0){
            document.getElementById("iconarea").style.display="block";
            flag=1;
        }else{
            document.getElementById("iconarea").style.display="none";
            flag=0;
        }
    }

    function btnpush(){
        if(t_collLast() == t_total){
            location("desktopfinish","true");
            location.href = "../c/result.html?game1";
        }else{
            Z_unfinished_shutdown();
            alert("今はやめておこう");
        }

    }

    function update_check(){
        if(localStorage.getItem("f_update") == "true"){
            return 0;
        }

        if(t_collLast() == t_total){
            localStorage.setItem('f_update','true');
            Z_task_finished_update();    //全てのタスクが完了し、更新した
            document.getElementById('main').style.backgroundColor = "#808080";
            alert("更新した");
        }else{
            alert("業務が終わってから更新しよう");
        }
        
    }
    'use strict';
    </script>

</body>
</html>



